<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShineOn tool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
<div style="margin: 3% 10% 0 10%;">
    <div>
        <h1>
            <span>This tool was built with low cost.. Please use it correctly :D</span>
        </h1>
        <div>
            <h4>
                <span>Should turn off this setting for faster download:</span>
            </h4>
            <a href="chrome://settings/downloads">chrome://settings/downloads</a>
            <span> -> Ask where to save each file before downloading -> </span>
            <span style="color: brown">turn off</span>
        </div>
    </div>
    <br>
    <br>
    <div class="container">
        <div class="row">
            <div class="col-3">
                <span>Product</span>
                <div class="input-group-prepend">
                    <form>
                        <select id="products" name="products" class="form-select" aria-label="Default select example">
                            <option value="love-knot">Love Knot</option>
                            <option value="forever-love">Forever Love</option>
                            <option value="alluring-beauty">Alluring Beauty</option>
                            <option value="interlocking-hearts">Interlocking Hearts</option>
                            <option value="lucky_in_love">Lucky In Love</option>
                            <option value="eternal_hope">Eternal Hope</option>
                            <option value="faith_cross">Faith Cross</option>
                            <option value="cuban">Cuban</option>
                            <option value="cross">Cross</option>
                            <option value="cross_bracelet">Cross Bracelet</option>
                            <option value="square_acrylic_plaque">Square Acrylic Plaque</option>
                            <option value="heart_acrylic_plaque">Heart Acrylic Plaque</option>
                            <option value="mens_cross_bracelet">Men's Cross Bracelet</option>
                            <option value="cuban_cross_necklace">Cuban Cross Necklace</option>
                            <option value="cross_1">Cross 1</option>
                            <option value="cross_2">Cross 2</option>
                        </select>
                    </form>
                </div>
            </div>
            <div class="col-3">
                <span>Step</span>
                <div class="input-group-prepend">
                    <form>
                        <select id="types" name="types" class="form-select" aria-label="Default select example">
                            <option value="create-product">Create product</option>
                            <option value="update-variation">Update variation</option>
                        </select>
                    </form>
                </div>
            </div>
            <div class="col-6">
                <span>Link</span>
                <div class="input-group">
                    <input type="text" id="background-src-url" class="form-control">
                    <div class="input-group-append">
                        <button type="submit" class="btn btn-primary" onclick="downloadImages()">Submit</button>
                    </div>
                </div>
            </div>
        </div>


        <div class="row tiktok" style="margin-top: 10%">
            <div class="col-3">
                <span>Product</span>
                <div class="input-group-prepend">
                    <form>
                        <select id="tik-tok-products" name="products" class="form-select"
                                aria-label="Default select example">
                            <option value="anh-1">áº¢nh 1</option>
                        </select>
                    </form>
                </div>
            </div>
            <div class="col-6">
                <span>Link</span>
                <div class="input-group">
                    <input type="text" id="tik-tok-background-src-url" class="form-control">
                    <div class="input-group-append">
                        <button type="submit" class="btn btn-primary" onclick="downloadTiTokImages()">Submit</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <br>
    <br>
</div>
<br>
<script src="jquery-3.6.4.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script>
    function shineOnUrl(code) {
        const url = 'https://api.shineon.com/v1/renders/' + code + '/make';
        return url;
    }

    function makeid(length) {
        let result = '';
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        const charactersLength = characters.length;
        let counter = 0;
        while (counter < length) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
            counter += 1;
        }
        return result;
    }


    async function downloadImage(index, imageSrc, productType) {
        const image = await fetch(imageSrc)
        const imageBlog = await image.blob()
        const imageURL = URL.createObjectURL(imageBlog)

        const link = document.createElement('a')
        link.href = imageURL
        document.body.appendChild(link)
        link.download = productType + '-' + index + '-' + makeid(8)
        link.click()
        document.body.removeChild(link)
    }

    async function downloadImageTikTok(index, imageSrc) {
        const image = await fetch(imageSrc)
        const imageBlog = await image.blob()
        const imageURL = URL.createObjectURL(imageBlog)

        const link = document.createElement('a')
        link.href = imageURL
        document.body.appendChild(link)
        link.download = index + '-' + makeid(8)
        link.click()
        document.body.removeChild(link)
    }

    function getLoveKnotCodes(key) {
        const codes = new Map();
        codes.set('14S', [12044, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/6.png', 17538, 17229, 14170, 12134, 12156]);
        codes.set('14L', [12061, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/6.png', 12176, 12171, 12169, 12146, 12151]);
        codes.set('18S', [12018, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/5.png', 17966, 12020, , 17967, 14188, 12744]);
        codes.set('18L', [12024, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/5.png', 12386, 12385, 12388, 12291, 12610]);
        return codes.get(key);
    }

    function getForeverLoveCodes(key) {
        const codes = new Map();
        codes.set('14S', [3565, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/4.png', 2278, 2272, 5239, 1723, 8853]);
        codes.set('14L', [9203, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/4.png', 9202, 1725, 1719, 11284, 1723]);
        codes.set('18S', [3566, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/3.png', 2287, 17503, 13442, 13444, 11302]);
        codes.set('18L', [9217, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/3.png', 9212, 5621, 13449, 13983, 13981]);
        return codes.get(key);
    }

    function getAlluringBeautyCodes(key) {
        const codes = new Map();
        codes.set('14S', [12053, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/2.png', 12211, 12201, 12216, 12207, 12202]);
        codes.set('14L', [12058, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/2.png', 12225, 12239, 12237, 12220, 12412]);
        codes.set('18S', [12034, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/1.png', 12112, 12112, 12606, 12747, 12127]);
        codes.set('18L', [12037, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/1.png', 12122, 12121, 12607, 12240, 12128]);
        return codes.get(key);
    }

    function getInterlockingHeartsCodes(key) {
        const codes = new Map();
        codes.set('14S', [12046, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/8.png', 12047, 12260, 12265, 12263, 14121]);
        codes.set('14L', [12051, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/8.png', 12287, 12274, 12288, 12284, 12250]);
        codes.set('18S', [12045, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/7.png', 14150, 12103, 12608, 14203, 12448]);
        codes.set('18L', [12067, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/7.png', 12106, 12105, 12110, 14131, 12289]);
        return codes.get(key);
    }

    function getLuckyInLoveCodes(key) {
        const codes = new Map();
        codes.set('14S', [9747, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/lucky.jpeg', 9763, 17471, 13543, 9756, 9754]);
        codes.set('14L', [11113, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/lucky.jpeg', 9778, 17465, 9742, 9924, 9758]);
        return codes.get(key);
    }

    function getEternalHopeCodes(key) {
        const codes = new Map();
        codes.set('14S', [11104, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/9.png', 8707, 10061, 13888, 8718, 8689]);
        codes.set('14L', [11105, 'https://hehehehsss.s3.us-east-2.amazonaws.com/product-background/common-image/9.png', 8727, 8729, 13887, 8730, 12641]);
        return codes.get(key);
    }

    function getFaithCrossCodes(key) {
        const codes = new Map();
        codes.set('14S', [11350, 12571, 11348, 11343, 11347, 12572, 12573, 11350, 11354, 12579, 11344, 11356, 11357, 12573]);
        return codes.get(key);
    }

    function getCrossCodes(key) {
        const codes = new Map();
        codes.set('14S', [11350, 12571, 11348, 11343, 11347, 12572, 12573]);
        codes.set('14L', [11350, 11354, 12579, 11344, 11356, 11357, 12573]);
        return codes.get(key);
    }

    function getCubanCodes(key) {
        const codes = new Map();
        codes.set('14S', [11570, 11571, 11587, 11576, 11509, 11507, 11488]);
        codes.set('14L', [11511, 11494, 11500, 17457, 13641, 11510, 11490]);
        codes.set('18S', [11645, 11650, 11648, 11655, 13311, 11510, 11465]);
        codes.set('18L', [11486, 11484, 11485, 11475, 11474, 11467, 11481]);
        return codes.get(key);
    }

    function getCrossBraceletCodes(key) {
        const codes = new Map();
        codes.set('14S', [17960, 17451, 17212, 17190, 17221, 17245, 17241]);
        codes.set('14L', [17961, 17450, 17449, 17211, 17209, 17247, 17216]);
        return codes.get(key);
    }

    function getSquareAcrylicPlaque(key) {
        const codes = new Map();
        codes.set('14S', [16539, 16975, 17208, 16986, 17032, 17207, 16983]);
        codes.set('14L', [16542, 21083, 21081, 17009, 17008, 17001, 16987]);
        return codes.get(key);
    }

    function getHeartAcrylicPlaque(key) {
        const codes = new Map();
        codes.set('14S', [18701, 18705, 18703, 18704, 18707, 18711, 18712]);
        codes.set('14L', [18706, 21091, 21090, 19390, 19389, 19387, 19388]);
        return codes.get(key);
    }

    function getMensCrossBracelet(key) {
        const codes = new Map();
        codes.set('14S', [19501, 19570, 19559, 19465, 19554, 19566, 19560]);
        codes.set('14L', [19502, 19500, 19498, 19465, 19554, 19459, 19567]);
        return codes.get(key);
    }

    function getCubanCrossNecklace(key) {
        const codes = new Map();
        codes.set('14S', [11915, 16733, 12081, 12087, 12092, 16735, 16739]);
        codes.set('14L', [11915, 12096, 16746, 12090, 12092, 16743, 16745]);
        return codes.get(key);
    }

    function getCross1(key) {
        const codes = new Map();
        codes.set('14S', [3421, 2649, 2656, 2646, 14717, 2653, 2644]);
        codes.set('14L', [3421, 2017, 2978, 14719, 2979, 9541, 14716]);
        return codes.get(key);
    }

    function getCross2(key) {
        const codes = new Map();
        codes.set('14S', [5036, 4871, 4876, 8746, 14754, 8747, 4872]);
        codes.set('14L', [5036, 4879, 8752, 4875, 8750, 8751, 14753]);
        return codes.get(key);
    }


    function tempAlert(msg, duration) {
        const el = document.createElement("h3");
        el.setAttribute("style", "background-color:gray;text-align:center;");
        el.innerHTML = msg;
        setTimeout(function () {
            el.parentNode.removeChild(el);
        }, duration);
        document.body.appendChild(el);
    }

    function getTikTokCodes(key) {
        const codes = new Map();
        codes.set('anh-1', [12044, 12018, 3565, 3566, 12053, 12034, 12046, 12045, 11350]);
        return codes.get(key);
    }

    function downloadImages() {
        tempAlert('Please wait!', 3000);
        const backGroundSrcUrl = document.getElementById('background-src-url').value;
        if (backGroundSrcUrl === '') {
            return;
        }
        let listTypeOfProduct = ['14S'];
        const type = $('#types').find(":selected").val();

        if (type === 'update-variation') {
            listTypeOfProduct = ['14S', '14L', '18S', '18L'];
        }

        for (let j = 0; j < listTypeOfProduct.length; j++) {
            let codes;
            const productType = listTypeOfProduct[j];

            let withReplacePosition2 = true;
            switch ($('#products').find(":selected").val()) {
                case "alluring-beauty":
                    codes = this.getAlluringBeautyCodes(productType);
                    break;
                case "forever-love":
                    codes = this.getForeverLoveCodes(productType);
                    break;
                case "love-knot":
                    codes = this.getLoveKnotCodes(productType);
                    break;
                case "interlocking-hearts":
                    codes = this.getInterlockingHeartsCodes(productType);
                    break;
                case "lucky_in_love":
                    codes = this.getLuckyInLoveCodes(productType);
                    break;
                case "eternal_hope":
                    codes = this.getEternalHopeCodes(productType);
                    break;
                case "faith_cross":
                    codes = this.getFaithCrossCodes(productType);
                    withReplacePosition2 = false;
                    break;
                case "cuban":
                    codes = this.getCubanCodes(productType);
                    withReplacePosition2 = false;
                    break;
                case "cross":
                    codes = this.getCrossCodes(productType);
                    withReplacePosition2 = false;
                    break;
                case "cross_bracelet":
                    codes = this.getCrossBraceletCodes(productType);
                    withReplacePosition2 = false;
                    break;
                case "square_acrylic_plaque":
                    codes = this.getSquareAcrylicPlaque(productType);
                    withReplacePosition2 = false;
                    break;
                case "heart_acrylic_plaque":
                    codes = this.getHeartAcrylicPlaque(productType);
                    withReplacePosition2 = false;
                    break;
                case "mens_cross_bracelet":
                    codes = this.getMensCrossBracelet(productType);
                    withReplacePosition2 = false;
                    break;
                case "cuban_cross_necklace":
                    codes = this.getCubanCrossNecklace(productType);
                    withReplacePosition2 = false;
                    break;
                case "cross_1":
                    codes = this.getCross1(productType);
                    withReplacePosition2 = false;
                    break;
                case "cross_2":
                    codes = this.getCross2(productType);
                    withReplacePosition2 = false;
                    break;
                default:
                    codes = [];
            }

            if (codes === undefined) {
                continue;
            }

            for (let i = 0; i < codes.length; i++) {
                let url = shineOnUrl(codes[i]);
                if (i === 1 && withReplacePosition2) {
                    downloadImage(2, codes[1], productType)
                    continue;
                }
                $.ajax({
                    url: url,
                    type: "POST",
                    headers: {"Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIzIiwianRpIjoiZDA2NmM4NmEwY2E5ZDM3ODAwZGE2MGFkNGZmNTJkOGM4NjE3ZWYwM2QxNzNjNTVkNTcwZTkxN2ZmM2I1N2E4YzZiNWZhOTUxNDBkNWQ2Y2UiLCJpYXQiOjE3MDk4MTIxODAsIm5iZiI6MTcwOTgxMjE4MCwiZXhwIjoxNzQxMzQ4MTgwLCJzdWIiOiIyMTExOTIiLCJzY29wZXMiOlsicmVhZF9zaG9wIiwicmVhZF9vcmRlcnMiLCJyZWFkX3Byb2R1Y3RfdGVtcGxhdGVzIiwicmVhZF90cmFuc2Zvcm1hdGlvbnMiLCJ3cml0ZV9hcnR3b3JrIiwid3JpdGVfc2t1cyIsIndyaXRlX29yZGVycyIsIndyaXRlX2NyZWRpdHMiXX0.e-wRZ6C7v8GsBxLpTLFEUX_M_Gv70c458I-Gnum4meKGtYnfw9UmoCAf2IuGdXDZG_j18sdbvoMBy8pARhMug71yml85zvS-tGAq12W5GhArPp_Jz2GWmSorKp46TjBwS5xQhlNaD6WpJRoSygW5xV4smAf7ANdBlmxepGiXRzpFldMARaqWJqxRUxNQ3rfDOg1iuE8zxm7i4ffjJldxHY6lXtjKMWhfHbv7NGHDhIleG6S9nhyySm-KEG4uS3OMlkyQf6lcgksRCBDamKK4ME89piiu2V5zVtKy3XwiriPLVuw3zOB5ZoBagAoc2XMxtlC3MUm8vGVdeIbdlWLOneDXKx7iQiuXBPBlRWpE0imoX3Ywm2MrzCukjuxhzLcXqvEH4dFemKFE08Ix3j6H-GoDdKEAcTw9f4eO3ok2k-GAB3oOTxoxpU2zy5NQSY-z6-KWNL2ck8bCwtVrd_e02gBe-2KJ8dbol6pcF22udfE6noaE-DaWhFoxrW4d4nEs0B2693cS9cGv37f5f9ygeVGj5Y0zuQSU3mYxu2Bc4S0jKuu96Zm7orkQV0EjQVBxEnNdAiLRagkm1Jt8qM2p6SiG6jcu0EbDuVqZvZ-N0N7Hzr3SZdKHlLd2fou3TVKjN224AvKC2egMDZsZv-j9z1fIhiomeGZMu6woJz0468M"},
                    data: {
                        "src": backGroundSrcUrl,
                    },
                    success: async function (response) {
                        const responseUrl = response.render.make.src;
                        await downloadImage(i + 1, responseUrl, productType);
                    },
                });
            }
        }
    }

    function downloadTiTokImages() {
        tempAlert('Please wait!', 3000);
        const backGroundSrcUrl = document.getElementById('tik-tok-background-src-url').value;
        if (backGroundSrcUrl === '') {
            return;
        }
        var codes;
        var type = $('#tik-tok-products').find(":selected").val();
        codes = this.getTikTokCodes(type);

        for (let i = 0; i < codes.length; i++) {
            $.ajax({
                url: shineOnUrl(codes[i]),
                type: "POST",
                headers: {"Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIzIiwianRpIjoiZDA2NmM4NmEwY2E5ZDM3ODAwZGE2MGFkNGZmNTJkOGM4NjE3ZWYwM2QxNzNjNTVkNTcwZTkxN2ZmM2I1N2E4YzZiNWZhOTUxNDBkNWQ2Y2UiLCJpYXQiOjE3MDk4MTIxODAsIm5iZiI6MTcwOTgxMjE4MCwiZXhwIjoxNzQxMzQ4MTgwLCJzdWIiOiIyMTExOTIiLCJzY29wZXMiOlsicmVhZF9zaG9wIiwicmVhZF9vcmRlcnMiLCJyZWFkX3Byb2R1Y3RfdGVtcGxhdGVzIiwicmVhZF90cmFuc2Zvcm1hdGlvbnMiLCJ3cml0ZV9hcnR3b3JrIiwid3JpdGVfc2t1cyIsIndyaXRlX29yZGVycyIsIndyaXRlX2NyZWRpdHMiXX0.e-wRZ6C7v8GsBxLpTLFEUX_M_Gv70c458I-Gnum4meKGtYnfw9UmoCAf2IuGdXDZG_j18sdbvoMBy8pARhMug71yml85zvS-tGAq12W5GhArPp_Jz2GWmSorKp46TjBwS5xQhlNaD6WpJRoSygW5xV4smAf7ANdBlmxepGiXRzpFldMARaqWJqxRUxNQ3rfDOg1iuE8zxm7i4ffjJldxHY6lXtjKMWhfHbv7NGHDhIleG6S9nhyySm-KEG4uS3OMlkyQf6lcgksRCBDamKK4ME89piiu2V5zVtKy3XwiriPLVuw3zOB5ZoBagAoc2XMxtlC3MUm8vGVdeIbdlWLOneDXKx7iQiuXBPBlRWpE0imoX3Ywm2MrzCukjuxhzLcXqvEH4dFemKFE08Ix3j6H-GoDdKEAcTw9f4eO3ok2k-GAB3oOTxoxpU2zy5NQSY-z6-KWNL2ck8bCwtVrd_e02gBe-2KJ8dbol6pcF22udfE6noaE-DaWhFoxrW4d4nEs0B2693cS9cGv37f5f9ygeVGj5Y0zuQSU3mYxu2Bc4S0jKuu96Zm7orkQV0EjQVBxEnNdAiLRagkm1Jt8qM2p6SiG6jcu0EbDuVqZvZ-N0N7Hzr3SZdKHlLd2fou3TVKjN224AvKC2egMDZsZv-j9z1fIhiomeGZMu6woJz0468M"},
                data: {
                    "src": backGroundSrcUrl,
                },
                success: async function (response) {
                    const responseUrl = response.render.make.src;
                    await downloadImageTikTok(i + 1, responseUrl);
                },
            });
        }

    }
</script>
</body>
</html>
